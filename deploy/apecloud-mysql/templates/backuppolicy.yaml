apiVersion: dataprotection.kubeblocks.io/v1alpha1
kind: BackupPolicy
metadata:
  name: apecloud-mysql-backup-policy
  labels:
    clusterdefinition.kubeblocks.io/name: apecloud-mysql
  annotations:
    dataprotection.kubeblocks.io/is-default-policy-template: "true"
spec:
  pathPrefix: /wesql-3d04e268-ed82-42fe-a0af-b2cf162dfbea/mysql
  backoffLimit: 0
  target:
    podSelector:
      matchLabels:
        app.kubernetes.io/component: mysql
        app.kubernetes.io/instance: cornel27
    connectionCredential:
      secretName: cornel27-conn-credential
      usernameKey: username
      passwordKey: password
      portKey: port
      hostKey: host
      endpointKey: endpoint
  backupMethods:
  - name: xtrabackup
    snapshotVolumes: false
    actionSetName: xtrabackup-for-apecloud-mysql
    targetVolumes:
      volumeMounts:
      - name: data
        mountPath: /data/mysql
  - name: volume-snapshot
    actionSetName: apecloud-mysql-volume-snapshot
    snapshotVolumes: true
    targetVolumes:
      volumes:
      - data