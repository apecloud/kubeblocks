# Default values for apecloud-mysql.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

image:
  registry: infracreate-registry.cn-zhangjiakou.cr.aliyuncs.com
  repository: apecloud/apecloud-mysql-server
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: 8.0.30-5.beta2.20230830.g4ca1eb8.13
  audit:
    tag: 8.0.30-5.auditlogtest.20231121.g143b127.13

## MySQL Cluster parameters
cluster:
  ## CLUSTER_ID
  clusterId: "1"
  ## CLUSTER_START_INDEX
  clusterStartIndex: "1"
  ## @param cluster.replicaSetCount
  replicaSetCount: 3
  ## MYSQL_TEMPLATE_CONFIG
  templateConfig:
  ## MYSQL_CUSTOM_CONFIG
  customConfig:
  ## MYSQL_DYNAMIC_CONFIG
  dynamicConfig:
  ## KB_EMBEDDED_WESQL
  kbWeSQLImage: "1"

## MySQL Authentication parameters
auth:
  ## MYSQL_ROOT_HOST
  rootHost: "%"
  ## @param auth.createDatabase Whether to create the .Values.auth.database or not
  ##
  createDatabase: true
  ## @param auth.database Name for a custom database to create
  ## MYSQL_DATABASE
  database: "mydb"
  ## @param auth.username Name for a custom user to create
  ## MYSQL_USER
  username: "u1"
  ## MYSQL_PASSWORD
  password: "u1"
  ## @param auth.replicationUser MySQL replication user
  ##
  replicationUser: "replicator"
  ## @param auth.replicationPassword MySQL replication user password. Ignored if existing secret is provided
  ##
  replicationPassword: ""


configTemplate:
## @param config template name
## name: mysql-3node-tpl-8.0

imagePullSecrets: [ ]
nameOverride: ""
fullnameOverride: ""
clusterVersionOverride: ""

mysqlConfigs:
  dataMountPath: /data/mysql
  dataDir: /data/mysql/data
  logBin: /data/mysql/binlog/mysql-bin


logConfigs:
  error: /data/mysql/log/mysqld-error.log
  slow: /data/mysql/log/mysqld-slowquery.log
  general: /data/mysql/log/mysqld.log
  auditlog: /data/mysql/auditlog/*.alog

vtgateLogConfigs:
  error: /vtdataroot/vtgate.ERROR
  warning: /vtdataroot/vtgate.WARNING
  info: /vtdataroot/vtgate.INFO
  queryLog: /vtdataroot/vtgate_querylog.txt

vtconsensusLogConfigs:
  error: /vtdataroot/vtconsensus/vtconsensus.ERROR
  warning: /vtdataroot/vtconsensus/vtconsensus.WARNING
  info: /vtdataroot/vtconsensus/vtconsensus.INFO

roleProbe:
  failureThreshold: 2
  periodSeconds: 1
  timeoutSeconds: 1

logCollector:
  enabled: false

metrics:
  image:
    registry: infracreate-registry.cn-zhangjiakou.cr.aliyuncs.com
    repository: apecloud/agamotto
    tag: 0.1.2-beta.1
    pullPolicy: IfNotPresent

  service:
    port: 9104

backupTool:
  image:
    registry: infracreate-registry.cn-zhangjiakou.cr.aliyuncs.com
    repository: apecloud/apecloud-xtrabackup
    tag: latest
    pullPolicy: IfNotPresent

wesqlscale:
  cell: "zone1"
  image:
    registry: infracreate-registry.cn-zhangjiakou.cr.aliyuncs.com
    repository: apecloud/apecloud-mysql-scale
    tag: "0.1.1"
    pullPolicy: IfNotPresent