apiVersion: v1
kind: ConfigMap
metadata:
  name: oss-persistent-volume-template
  labels:
    kubeblocks.io/persistent-volume-template: "true"
data:
  persistentVolume: |
    apiVersion: v1
    kind: PersistentVolume
    metadata:
      name: $(GENERATE_NAME)
      labels:
        alicloud-pvname: $(GENERATE_NAME)
    spec:
      capacity:
        storage: 100Gi
      accessModes:
        - ReadWriteMany
      persistentVolumeReclaimPolicy: Retain
      csi:
        driver: ossplugin.csi.alibabacloud.com
        volumeHandle: $(GENERATE_NAME)
        nodePublishSecretRef:
          name: {{ .Values.secret.name }}
          namespace: {{ .Release.Namespace }}
        volumeAttributes:
          bucket: "{{ .Values.storageConfig.bucket }}"
          url: "{{ .Values.storageConfig.endpoint }}"
          otherOpts: "{{ .Values.storageConfig.otherOpts }}"
          path: "{{ .Values.storageConfig.path }}"