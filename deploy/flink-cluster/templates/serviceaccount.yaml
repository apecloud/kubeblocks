{{- if .Values.jobmanager.serviceAccount.create }}
apiVersion: v1
kind: ServiceAccount
metadata:
  name:  {{ include "flink-cluster.jobmanager.serviceAccountName" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/part-of: flink-cluster
    app.kubernetes.io/component: jobmanager
    {{- include "flink-cluster.labels" . | nindent 4 }}
automountServiceAccountToken: {{ .Values.jobmanager.serviceAccount.automountServiceAccountToken }}
{{- end }}
---
{{- if .Values.taskmanager.serviceAccount.create }}
apiVersion: v1
kind: ServiceAccount
metadata:
  name:  {{ include "flink-cluster.taskmanager.serviceAccountName" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/part-of: flink-cluster
    app.kubernetes.io/component: taskmanager
    {{- include "flink-cluster.labels" . | nindent 4 }}
automountServiceAccountToken: {{ .Values.taskmanager.serviceAccount.automountServiceAccountToken }}
{{- end }}
