apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.1
  labels:
    app.kubernetes.io/name: kubeblocks
  name: componentversions.apps.kubeblocks.io
spec:
  group: apps.kubeblocks.io
  names:
    categories:
    - kubeblocks
    kind: ComponentVersion
    listKind: ComponentVersionList
    plural: componentversions
    shortNames:
    - cmpv
    singular: componentversion
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ComponentVersion is the Schema for the componentversions API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ComponentVersionSpec defines the desired state of ComponentVersion
            properties:
              components:
                additionalProperties:
                  items:
                    description: ComponentApp represents an application within a component.
                    properties:
                      appVersions:
                        description: AppVersions is a list of versions associated
                          with this application. Cannot be updated.
                        items:
                          description: ComponentAppVersion represents the version
                            information for a specific application.
                          properties:
                            image:
                              description: Image is the container image associated
                                with this application version. Cannot be updated.
                              maxLength: 128
                              type: string
                            version:
                              description: Version is the version number of the application.
                                If this version is used, it will be used as the service
                                version for component instances, overwriting the one
                                defined in the component definition. Cannot be updated.
                              maxLength: 64
                              type: string
                          required:
                          - image
                          - version
                          type: object
                        maxItems: 128
                        minItems: 1
                        type: array
                      name:
                        description: Name is the name of the application, it indicates
                          the name of container within the referred ComponentDefinition.
                          Cannot be updated.
                        maxLength: 32
                        type: string
                    required:
                    - appVersions
                    - name
                    type: object
                  type: array
                description: Components is a mapping from the definition name to a
                  list of component apps within this ComponentVersion.
                maxProperties: 128
                minProperties: 1
                type: object
            required:
            - components
            type: object
          status:
            description: ComponentVersionStatus defines the observed state of ComponentVersion
            properties:
              message:
                description: Extra message for current phase.
                type: string
              observedGeneration:
                description: ObservedGeneration is the most recent generation observed
                  for this ComponentVersion.
                format: int64
                type: integer
              phase:
                description: Phase valid values are ``, `Available`, 'Unavailable`.
                  Available is ComponentVersion become available, and can be used
                  for co-related objects.
                enum:
                - Available
                - Unavailable
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
