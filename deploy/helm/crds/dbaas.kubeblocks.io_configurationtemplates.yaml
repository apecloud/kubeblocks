---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.0
  creationTimestamp: null
  name: configurationtemplates.dbaas.kubeblocks.io
spec:
  group: dbaas.kubeblocks.io
  names:
    categories:
    - dbaas
    kind: ConfigurationTemplate
    listKind: ConfigurationTemplateList
    plural: configurationtemplates
    shortNames:
    - ctpl
    singular: configurationtemplate
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: status phase
      jsonPath: .status.phase
      name: PHASE
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: AGE
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ConfigurationTemplate is the Schema for the configurationtemplates
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ConfigurationTemplateSpec defines the desired state of ConfigurationTemplate
            properties:
              cfgSchemaTopLevelName:
                description: CfgSchemaTopLevelName is cue type name, which generate
                  openapi schema
                type: string
              configurationSchema:
                description: ConfigurationSchema that impose restrictions on engine
                  parameter's rule
                properties:
                  cue:
                    description: Cue that to let ISV verify user configuration through
                      cue language
                    type: string
                  schema:
                    description: 'TODO(zt) DAY2 support schema Schema provides a way
                      for ISVs to verify the validity of user change parameters through
                      json schema controller-gen doesn''t work with k8s.io/apiextensions-apiserver:
                      https://github.com/kubernetes-sigs/controller-tools/issues/291'
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              dynamicParameters:
                description: DynamicParameters support reload
                items:
                  type: string
                type: array
              formatter:
                default: YAML
                enum:
                - DOTENV
                - INI
                - YAML
                - JSON
                - HCL
                type: string
              immutable:
                description: Immutable, if set to true, ensures that data stored in
                  the ConfigMap cannot be updated (only object metadata can be modified).
                  If set to true, Configmap object referenced by TplRef will also
                  be modified to immutable Defaulted to true It is recommended to
                  turn this option on only during the development or testing phase.
                type: boolean
              immutableParameters:
                description: ImmutableParameters describe not modify parameters by
                  user
                items:
                  type: string
                type: array
              staticParameters:
                description: StaticParameters require db instance restart
                items:
                  type: string
                type: array
              tplRef:
                description: TplRef is a reference to the configmap object, the configmap
                  determines how to generate the configurations
                type: string
              upgradeMode:
                default: STATIC_MODE
                description: UpgradeMode describe parameter update mode
                enum:
                - DYNAMIC_MODE
                - STATIC_MODE
                type: string
            type: object
          status:
            description: ConfigurationTemplateStatus defines the observed state of
              ConfigurationTemplate
            properties:
              message:
                type: string
              observedGeneration:
                description: observedGeneration is the most recent generation observed
                  for this ClusterDefinition. It corresponds to the ClusterDefinition's
                  generation, which is updated on mutation by the API Server.
                format: int64
                type: integer
              phase:
                description: Phase is configuration template status, if it is set
                  to AvailablePhase, ConfigurationTemplate be used by ClusterDefinition
                  or AppVersion
                enum:
                - AvailablePhase
                - UnavailablePhase
                - DeletingPhase
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
