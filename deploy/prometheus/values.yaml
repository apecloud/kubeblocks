clusterVersionOverride: ""

alertmanager:
  ## alertmanager container image
  ##
  image:
    registry: registry.cn-hangzhou.aliyuncs.com
    repository: apecloud/alertmanager
    pullPolicy: IfNotPresent
    tag: v0.24.0

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.alertmanager.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/alertmanager-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  ## TODO:
  configMapOverrideName: "alertmanager-config"

  ## Node tolerations for alertmanager scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  ## TODO:
  tolerations:
    - key: kb-controller
      operator: Equal
      value: "true"
      effect: NoSchedule

  ## TODO:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          preference:
            matchExpressions:
              - key: kb-controller
                operator: In
                values:
                  - "true"

  ## TODO:
  persistentVolume:
    ## If true, alertmanager will create/use a Persistent Volume Claim
    ## If false, use emptyDir
    ##
    enabled: false

    ## alertmanager data Persistent Volume size
    ##
    size: 1Gi

    ## alertmanager data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"

  ## Security context to be added to alertmanager pods
  ##
  ## TODO:
  securityContext:
    runAsUser: 0
    runAsNonRoot: false
    runAsGroup: 65534
    fsGroup: 65534

  ## TODO:
  containerSecurityContext:
    allowPrivilegeEscalation: false

configmapReload:
  prometheus:
    ## configmap-reload container image
    ##
    image:
      registry: registry.cn-hangzhou.aliyuncs.com
      repository: apecloud/configmap-reload
      pullPolicy: IfNotPresent
      tag: v0.5.0
  alertmanager:
    ## configmap-reload container image
    ##
    image:
      registry: registry.cn-hangzhou.aliyuncs.com
      repository: apecloud/configmap-reload
      pullPolicy: IfNotPresent
      tag: v0.5.0

server:
  ## Prometheus server container image
  ##
  image:
    registry: registry.cn-hangzhou.aliyuncs.com
    repository: apecloud/prometheus
    pullPolicy: IfNotPresent
    tag: v2.44.0

  global:
    ## How frequently to scrape targets by default
    ##
    scrape_interval: 15s
    ## How long until a scrape request times out
    ##
    scrape_timeout: 10s
    ## How frequently to evaluate rules
    ##
    evaluation_interval: 15s

  ## Additional Prometheus server container flags
  ##
  extraFlags:
    - web.enable-lifecycle
    - web.enable-remote-write-receiver

  ## Additional Prometheus server container arguments
  ##
  extraArgs:
    log.level: info
    storage.tsdb.min-block-duration: 30m
    enable-feature: memory-snapshot-on-shutdown

  ## https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
  ##
  ## TODO:
  remoteWrite: []

  ## Prefix used to register routes, overriding externalUrl route.
  ## Useful for proxies that rewrite URLs.
  ##
  ## TODO:
  routePrefix: /

  ## Node tolerations for server scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  ## TODO:
  tolerations:
    - key: kb-controller
      operator: Equal
      value: "true"
      effect: NoSchedule

  ## TODO:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          preference:
            matchExpressions:
              - key: kb-controller
                operator: In
                values:
                  - "true"

  ## TODO:
  persistentVolume:
    ## If true, Prometheus server will create/use a Persistent Volume Claim
    ## If false, use emptyDir
    ##
    enabled: false

    ## Prometheus server data Persistent Volume size
    ##
    size: 20Gi

    ## Prometheus server data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"

  ## Prometheus' data retention period (default if not specified is 15 days)
  ##

  retention: "2d"

  ## Security context to be added to server pods
  ##
  ## TODO:
  securityContext:
    runAsUser: 0
    runAsNonRoot: false
    runAsGroup: 65534
    fsGroup: 65534

  ## TODO:
  containerSecurityContext:
    allowPrivilegeEscalation: false
