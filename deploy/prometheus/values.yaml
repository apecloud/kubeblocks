clusterVersionOverride: ""

alertmanager:
  ## alertmanager container image
  ##
  image:
    registry: registry.cn-hangzhou.aliyuncs.com
    repository: apecloud/alertmanager
    pullPolicy: IfNotPresent
    tag: v0.24.0

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.alertmanager.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/alertmanager-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: "alertmanager-config"

  ## Security context to be added to alertmanager pods
  ##
  securityContext:
    runAsUser: 0
    runAsNonRoot: false
    runAsGroup: 65534
    fsGroup: 65534

  containerSecurityContext:
    allowPrivilegeEscalation: false

configmapReload:
  securityContext:
    runAsUser: 0
    runAsNonRoot: false
    runAsGroup: 65534
    fsGroup: 65534
  prometheus:
    ## configmap-reload container image
    ##
    image:
      registry: registry.cn-hangzhou.aliyuncs.com
      repository: apecloud/configmap-reload
      pullPolicy: IfNotPresent
      tag: v0.5.0
    containerSecurityContext:
      allowPrivilegeEscalation: false

  alertmanager:
    ## configmap-reload container image
    ##
    image:
      registry: registry.cn-hangzhou.aliyuncs.com
      repository: apecloud/configmap-reload
      pullPolicy: IfNotPresent
      tag: v0.5.0
    containerSecurityContext:
      allowPrivilegeEscalation: false

server:
  ## Prometheus server container image
  ##
  image:
    registry: registry.cn-hangzhou.aliyuncs.com
    repository: apecloud/prometheus
    pullPolicy: IfNotPresent
    tag: v2.44.0

  global:
    ## How frequently to scrape targets by default
    ##
    scrape_interval: 15s
    ## How long until a scrape request times out
    ##
    scrape_timeout: 10s
    ## How frequently to evaluate rules
    ##
    evaluation_interval: 15s

  ## Additional Prometheus server container flags
  ##
  extraFlags:
    - web.enable-lifecycle
    - web.enable-remote-write-receiver

  ## Additional Prometheus server container arguments
  ##
  extraArgs:
    log.level: info
    storage.tsdb.min-block-duration: 30m
    enable-feature: memory-snapshot-on-shutdown

  ## https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
  ##
  remoteWrite: []

  remoteRead: []

  ## Prefix used to register routes, overriding externalUrl route.
  ## Useful for proxies that rewrite URLs.
  ##
  ## TODO:
  routePrefix: /

  ## Prometheus' data retention period (default if not specified is 15 days)
  ##

  retention: "2d"

  ## Security context to be added to server pods
  ##
  securityContext:
    runAsUser: 0
    runAsNonRoot: false
    runAsGroup: 65534
    fsGroup: 65534

  containerSecurityContext:
    allowPrivilegeEscalation: false


  persistentVolume:
    ## If true, Prometheus server will create/use a Persistent Volume Claim
    ## If false, use emptyDir
    ##
    enabled: true

    ## Prometheus server data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"

    ## Prometheus server data Persistent Volume Binding Mode
    ## If defined, volumeBindingMode: <volumeBindingMode>
    ## If undefined (the default) or set to null, no volumeBindingMode spec is
    ##   set, choosing the default mode.
    ##
    # volumeBindingMode: ""

    ## Subdirectory of Prometheus server data Persistent Volume to mount
    ## Useful if the volume's root directory is not empty
    ##
    subPath: ""

  emptyDir:
    ## Prometheus server emptyDir volume size limit
    ##
    sizeLimit: ""
