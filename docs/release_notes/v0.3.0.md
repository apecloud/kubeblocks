# KubeBlocks 0.3.0 (2023-01-18)

We're happy to announce the release of KubeBlocks 0.3.0! ðŸš€ ðŸŽ‰ ðŸŽˆ

We would like to extend our thanks to all the new and existing contributors who helped make this release happen.

**Highlights**

  * Limitations of cluster's horizontal scale operation:
    * Only support VolumeSnapshot API to make a clone of Cluster's PV needs sync data when horizontal scaling.
    * Only 1st pod container and 1st volume mount associated PV will be processed for VolumeSnapshot, do assure that data volume is placed in 1st pod container's 1st volume mount.
    * Unused PVCs will be deleted 30 minutes after scale in.


If you're new to KubeBlocks, visit the [getting started](https://kubeblocks.io) page and
familiarize yourself with KubeBlocks.



See [this](#upgrading-to-kubeblocks-0.3.0) section on upgrading KubeBlocks to version 0.3.0.

## Acknowledgements

Thanks to everyone who made this release possible!

@free6om, @JashBook, @ldming, @michelle-0808, @shanshanying, @sophon-zt, @wangyelei, @xuriwuyun, @yangmeilly, @ZhaoDiankui

## What's Changed

### New Features
-  SystemAccount Creation on Demand  ([#511](https://github.com/apecloud/kubeblocks/pull/511), @shanshanying)
-  support dashboard command ([#783](https://github.com/apecloud/kubeblocks/pull/783), @ldming)
-  cli support cluster update ([#826](https://github.com/apecloud/kubeblocks/pull/826), @ldming)
-  probe support timeout seconds ([#864](https://github.com/apecloud/kubeblocks/pull/864), @xuriwuyun)
-  install kubeblocks support to create namespace ([#880](https://github.com/apecloud/kubeblocks/pull/880), @ldming)
-  auto move issue when released ([#895](https://github.com/apecloud/kubeblocks/pull/895), @JashBook)
-  cli describe and list enhancement ([#896](https://github.com/apecloud/kubeblocks/pull/896), @ldming)
-  add troubleshoot.sh module and preflight checks for kubeblocks ([#939](https://github.com/apecloud/kubeblocks/pull/939), @yangmeilly)
-  cli connect enhancement, support to show connection example ([#951](https://github.com/apecloud/kubeblocks/pull/951), @ldming)
-  upload kbcli to public repo ([#960](https://github.com/apecloud/kubeblocks/pull/960), @JashBook)
-  cli support to list ClusterDefinition, ClusterVersion and users ([#967](https://github.com/apecloud/kubeblocks/pull/967), @ldming)
-  add make manifests to ci ([#990](https://github.com/apecloud/kubeblocks/pull/990), @JashBook)

### Bug Fixes
-  probe support get paasword with secret ([#756](https://github.com/apecloud/kubeblocks/pull/756), @xuriwuyun)
-  update helm template ([#890](https://github.com/apecloud/kubeblocks/pull/890), @xuriwuyun)
-  add exec command in wesql setup.sh script ([#936](https://github.com/apecloud/kubeblocks/pull/936), @ZhaoDiankui)
-  make error for duplicate constant ([#944](https://github.com/apecloud/kubeblocks/pull/944), @ldming)
-  modify kbcli and readme docs ([#947](https://github.com/apecloud/kubeblocks/pull/947), @michelle-0808)
-  probe event lost ([#964](https://github.com/apecloud/kubeblocks/pull/964), @xuriwuyun)
-  check if kubeblocks is installed when install kubeblocks ([#981](https://github.com/apecloud/kubeblocks/pull/981), @ldming)
-  update makefile for probe ([#992](https://github.com/apecloud/kubeblocks/pull/992), @xuriwuyun)
-  component doc for consensusset ([#999](https://github.com/apecloud/kubeblocks/pull/999), @free6om)
-  update wesql config constraint (#1013) ([#1018](https://github.com/apecloud/kubeblocks/pull/1018), @sophon-zt)

### Miscellaneous
-  user docs ([#665](https://github.com/apecloud/kubeblocks/pull/665), @michelle-0808)
-  refactor AppVersion API to ClusterVersion API ([#852](https://github.com/apecloud/kubeblocks/pull/852), @wangyelei)
-  update probe api crd ([#1003](https://github.com/apecloud/kubeblocks/pull/1003), @xuriwuyun)
-  change values image tag ([#1007](https://github.com/apecloud/kubeblocks/pull/1007), @JashBook)
-  add lib to ci ([#1034](https://github.com/apecloud/kubeblocks/pull/1034), @JashBook)

## Upgrading to KubeBlocks 0.3.0

To upgrade to this release of KubeBlocks, follow the steps here to ensure a smooth upgrade.

Release Notes for `v0.3.0`:
- Rename CRD name `backupjobs.dataprotection.kubeblocks.io` 
to `backups.dataprotection.kubeblocks.io`
  - upgrade kubeblocks following commands:
      ```
      helm upgrade --install kubeblocks kubeblocks/kubeblocks --version 0.3.0
      ```
  - after you upgrade kubeblocks, check CRD `backupjobs.dataprotection.kubeblocks.io` and delete it
    ```
    kubectl delete crd backupjobs.dataprotection.kubeblocks.io
    ```
- Rename CRD name `appversions.dbaas.kubeblocks.io` to `clusterversions.dbaas.kubeblocks.io`
  - before you upgrade kubeblocks, please back up your Cluster CR yaml first.
    ```
    kubectl get cluster -oyaml > clusters.yaml
    ```
    then we replace all spec.appVersionRef to spec.clusterVersionRef in the clusters.yaml.
  
    finally, we handle OpsRequest CR in the same way.
  - after you upgrade kubeblocks, you can delete the CRD `appversions.dbaas.kubeblocks.io`
    ```
    kubectl delete crd appversions.dbaas.kubeblocks.io
    ```
    finally, we use the above backup of Clusters and OpsRequests to configure them.
    ```
    kubectl apply -f clusters.yaml
    ```
## Breaking Changes

None.
