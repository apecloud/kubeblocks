# Standard Kubernetes Kind declaration. Required.
apiVersion: dataprotection.kubeblocks.io/v1alpha1
# Standard Kubernetes Kind declaration. Required.
kind: RestoreJob
# Standard Kubernetes metadata. Required.
metadata:
  # Backup name. Maybe any valid Kubernetes object name. Required.
  name: restore-demo
# Parameters about the backup. Required.
spec:
  backupJobName: backup-success-demo
  # backup tool can get from backupJob label, no need define

  # array of remote volumes from CSI driver definition.
  #volumes:
  # - name: restore-remote-volume
  #   persistentVolumeClaim:
  #     claimName: csi-s3-pvc
  #     readOnly: true

  target:
    databaseEngine: mysql
    # 如何恢复实例的说明
    labelsSelector:
      matchLabels:
        mysql.oracle.com/cluster: mycluster

  # 声明恢复到集群的数据卷 for demo
  targetVolumes:
    - name: mysql-restore-storage
      persistentVolumeClaim:
        claimName: datadir-mycluster-0

  targetVolumeMounts:
    - name: mysql-restore-storage
      mountPath: /var/lib/mysql


  # Number of restore retries on fail.
  onFailAttempted: 3