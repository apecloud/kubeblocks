apiVersion: dataprotection.kubeblocks.io/v1alpha1
kind: BackupPolicy
metadata:
  name: backup-policy-
spec:
  schedule: "0 3 * * *"
  ttl: 168h0m0s
  backupToolName: xtrabackup-mysql
  target:
    databaseEngine: mysql
    labelsSelector:
      matchLabels:
        app.kubernetes.io/instance: wesql-cluster
    secret:
      name: wesql-cluster
  hooks:
    preCommands:
      - touch /data/mysql/.restore;sync
    postCommands:
      - rm -f /data/mysql/.restore;sync
  remoteVolume:
    name: backup-remote-volume
    persistentVolumeClaim:
      claimName: backup-host-path-pvc
  onFailAttempted: 3