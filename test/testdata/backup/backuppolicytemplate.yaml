apiVersion: dataprotection.kubeblocks.io/v1alpha1
kind: BackupPolicyTemplate
metadata:
  labels:
    clusterdefinition.kubeblocks.io/name: apecloud-mysql
  name: backup-policy-template-
spec:
  backupToolName: mysql-xtrabackup
  credentialKeyword:
    passwordKeyword: password
    userKeyword: username
  hooks:
    containerName: mysql
    image: docker.io/apecloud/kubeblocks
    postCommands:
      - rm -f /data/mysql/data/.restore_new_cluster; sync
    preCommands:
      - touch /data/mysql/data/.restore_new_cluster; sync
  schedule: 0 2 * * *
  ttl: 168h0m0s
