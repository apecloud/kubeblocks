apiVersion: apps.kubeblocks.io/v1alpha1
kind: ClusterDefinition
metadata:
  name: %s
spec:
  componentDefs:
  - antiAffinity: false
    characterType: "mysql"
    workloadType: Consensus
    name: consensus
    logConfigs:
    - filePathPattern: /data/mysql/log/mysqld.err
      name: error
    podSpec:
      containers:
      - name: mysql
    consensusSpec:
      followers:
      - accessMode: Readonly
        name: follower
      leader:
        accessMode: ReadWrite
        name: leader
      updateStrategy: BestEffortParallel
    probes:
      roleChangedProbe:
        failureThreshold: 2
        periodSeconds: 1
        timeoutSeconds: 1